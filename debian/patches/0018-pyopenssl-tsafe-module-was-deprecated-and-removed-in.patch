From: Sergey Shepelev <temotor@gmail.com>
Date: Wed, 2 Dec 2020 01:10:02 +0300
Subject: pyopenssl tsafe module was deprecated and removed in v20.0.0

https://github.com/eventlet/eventlet/issues/671
https://github.com/pyca/pyopenssl/pull/913
---
 eventlet/green/OpenSSL/__init__.py | 7 ++++++-
 tests/openssl_test.py              | 1 -
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/eventlet/green/OpenSSL/__init__.py b/eventlet/green/OpenSSL/__init__.py
index d861476..1b25009 100644
--- a/eventlet/green/OpenSSL/__init__.py
+++ b/eventlet/green/OpenSSL/__init__.py
@@ -1,4 +1,9 @@
 from . import crypto
 from . import SSL
-from . import tsafe
+try:
+    # pyopenssl tsafe module was deprecated and removed in v20.0.0
+    # https://github.com/pyca/pyopenssl/pull/913
+    from . import tsafe
+except ImportError:
+    pass
 from .version import __version__
diff --git a/tests/openssl_test.py b/tests/openssl_test.py
index a127408..1108ada 100644
--- a/tests/openssl_test.py
+++ b/tests/openssl_test.py
@@ -12,5 +12,4 @@ def test_import():
 
     import eventlet.green.OpenSSL.SSL
     import eventlet.green.OpenSSL.crypto
-    import eventlet.green.OpenSSL.tsafe
     import eventlet.green.OpenSSL.version
